{% layout none %}

<!doctype html>
<html lang="{{ request.locale.iso_code }}">
  <head>
    {% render 'css-variables' %}
    {{ 'critical.css' | asset_url | stylesheet_tag: preload: true }}
    {{ 'hypeheat.css' | asset_url | stylesheet_tag }}
    {% render 'meta-tags' %}
    {{ content_for_header }}
  </head>

  <body>
    <div class="gift-card-page">
      <div class="gift-card">
        <p class="gift-card__brand">{{ shop.name }}</p>

        <div class="gift-card__visual">
          {% if gift_card.enabled == false or gift_card.expired %}
            <span class="gift-card__expired-badge">Expired</span>
          {% endif %}
          <div class="gift-card__amount">{{ gift_card.balance | money }}</div>
        </div>

        {% if gift_card.expires_on %}
          {% assign expires_on = gift_card.expires_on | date: '%B %e, %Y' %}
          <p class="gift-card__expiry">Expires {{ expires_on }}</p>
        {% endif %}

        <div class="gift-card__code-wrap">
          <p class="gift-card__label">Your Gift Card Code</p>
          <button class="gift-card__code" id="GiftCardCode" aria-label="Click to copy gift card code">
            {{ gift_card.code | format_code }}
          </button>
          <p class="gift-card__copy-hint" id="GiftCardHint">Click to copy</p>
        </div>

        <p class="gift-card__instructions">Use this code at checkout to redeem your gift card.</p>

        {% if gift_card.pass_url %}
          <a href="{{ gift_card.pass_url }}" class="gift-card__wallet">
            <img
              src="{{ 'gift-card/add-to-apple-wallet.svg' | shopify_asset_url }}"
              alt="Add to Apple Wallet"
              width="160"
              height="48"
            >
          </a>
        {% endif %}

        <a href="{{ shop.url }}" class="btn btn--primary gift-card__cta">Start Shopping</a>
      </div>
    </div>

    <script>
      var codeBtn = document.getElementById('GiftCardCode');
      var hint = document.getElementById('GiftCardHint');
      if (codeBtn) {
        codeBtn.addEventListener('click', function () {
          var code = this.textContent.replace(/\s/g, '');
          if (navigator.clipboard) {
            navigator.clipboard.writeText(code).then(function () {
              if (hint) hint.textContent = 'Copied!';
            });
          }
        });
      }
    </script>
  </body>
</html>
