{% comment %}
  Recently Purchased Popup â€” FOMO notification toast
  Pulls real products from the store and shows "X just bought Y" at intervals.
{% endcomment %}

<div class="recent-purchase" id="RecentPurchase" aria-live="polite" hidden>
  <button class="recent-purchase__close" aria-label="Close" onclick="this.parentElement.hidden=true">&times;</button>
  <p class="recent-purchase__title">RECENTLY PURCHASED</p>
  <div class="recent-purchase__content">
    <img class="recent-purchase__img" id="RecentPurchaseImg" src="" alt="" loading="lazy">
    <div class="recent-purchase__details">
      <span class="recent-purchase__name" id="RecentPurchaseName"></span>
      <strong class="recent-purchase__product" id="RecentPurchaseProduct"></strong>
      <span class="recent-purchase__time" id="RecentPurchaseTime"></span>
    </div>
  </div>
</div>

<script>
  window.__recentProducts = [
    {%- for product in collections.all.products limit: 20 -%}
      {
        "title": {{ product.title | json }},
        "image": {{ product.featured_image | image_url: width: 120, height: 120, crop: 'center' | json }},
        "url": {{ product.url | json }}
      }{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ];
</script>
